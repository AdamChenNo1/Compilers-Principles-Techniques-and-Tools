3.5.3：编写一个Lex程序。该程序拷贝一个C程序，并将程序中的关键字float的每个实例替换成double

解：  
求解思路：
  1. 找出C语言程序中float可能出现的所有位置  
  2. 用正则表达式标识出float作为关键字的情形
  3. 编写Lex程序实现将C程序拷贝中的每个float实例替换为double  

解答过程：
1. C语言程序中涉及到语素的过程为预处理阶段和词法分析阶段
   - 预处理阶段的过程有
      1. 首先，将三字符序列替换为等价字符。
         - 如果操作系统环境需要，还要在源文件的各行之间插入换行符。
      2. 将指令行中位于换行符前的反斜杠符\删除掉，以把各指令行连接起来。
      3. 将程序分成用空白符分隔的记号。注释将被替换为一个空白符。
      4. 接着执行预处理指令，并进行宏扩展。
      5. 将字符常量和字符串字面值中的转义字符序列替换为等价字符，然后把相邻的字符串字面值连接起来
      6. 收集必要的程序和数据，并将外部函数和对象的引用与其定义相连接，翻译经过以上处理得到的结果，然后与其他程序和库连接起来。

   - 词法分析的过程有
2. C语言程序中涉及到的语素概念如下：
   - 预处理过程中有
     - 三字符序列及其等价字符
     - 换行符
     - 反斜杠符\
     - 空白符
     - 记号
     - 注释
     - 预处理指令
     - 宏定义
        - 标识符
        - 记号序列
     - 文件包含
       - 文件名
     - 条件编译
       - 常量表达式
       - 标识符
       - 文本
     - 行控制
       - 文件名
     - 错误信息生成
       - 记号序列
     - pragma
       - 记号序列
     - 预定义名字
   - 词法分析过程中有
     - 记号
       - 标识符
       - 关键字
       - 常量
       - 字符串字面值
       - 运算符
       - 其他分隔符
       - 空白符
     - 注释
3. C语言程序中float可能出现的位置有  
- 注释  
- 标识符  
- 文件名  
- 宏定义中的记号序列  
- 条件编译中的记号序列  
- 错误信息生成中的记号序列  
- 关键字  
- 字符串字面值  

4. C语言程序中float作为关键字出现用正则表达式可表示为
  $$
    (\t| )+float(\t| )+
  $$

5. 将C程序拷贝中的每个float实例替换为double的Lex程序为
```Lex
  /*声明部分*/
%{
    /* 复制文件，并将新文件中每个float实例替换为double */
    #include <string.h>
%}
  /*规则部分*/
%%
[\t| ]float[\t| ] fprintf(yyout," double ", yytext);
. ECHO;
  /*自定义函数部分*/
%%
int yywrap(void) {
    return 1;
}
int main(int argc, char *argv[]) {
    yyin = fopen(argv[1], "r");
    char *filename = strcat(argv[1],"-1");
    yyout = fopen(filename,"w+");
    yylex();
    fclose(yyin);
    fclose(yyout);
}
```